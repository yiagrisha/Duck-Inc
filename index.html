<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Duck Inc.</title>
    <link rel="icon" type="image/png" href="images/favicon-inverted.png" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="stylesheet" href="css/colors.css" />
    <link rel="stylesheet" href="css/normalize.css" />
    <link rel="stylesheet" href="css/settings.css" />
    <link rel="stylesheet" href="css/layout.css" />
    <link rel="stylesheet" href="css/ids.css" />
    <link rel="stylesheet" href="css/gallery.css" />
    <link rel="stylesheet" href="css/navbar.css" />
  </head>

  <body class="ids">
    <header>
      <p>Duck Inc.</p>
      <div>
        <a href="#productBlock">
          <span class="text top">
            <span>P</span>
            <span>r</span>
            <span>o</span>
            <span>d</span>
            <span>u</span>
            <span>c</span>
            <span>t</span>
            <span>s</span>
          </span>
          <span class="text bottom">
            <span>P</span>
            <span>r</span>
            <span>o</span>
            <span>d</span>
            <span>u</span>
            <span>c</span>
            <span>t</span>
            <span>s</span>
          </span>
        </a>
        <a href="#thirdBlock">
          <span class="text top">
            <span>P</span>
            <span>o</span>
            <span>s</span>
            <span>t</span>
            <span>e</span>
            <span>r</span>
            <span>s</span>
          </span>
          <span class="text bottom">
            <span>P</span>
            <span>o</span>
            <span>s</span>
            <span>t</span>
            <span>e</span>
            <span>r</span>
            <span>s</span>
          </span>
        </a>
        <a href="#fourthBlock">
          <span class="text top">
            <span>A</span>
            <span>b</span>
            <span>o</span>
            <span>u</span>
            <span>t</span>
          </span>
          <span class="text bottom">
            <span>A</span>
            <span>b</span>
            <span>o</span>
            <span>u</span>
            <span>t</span>
          </span>
        </a>
      </div>
 
    </header>

    <main>
      <div class="ids__wrapper.XXL full-screen" id="firstBlock">
        <span>
          <h1>NUTRITION</h1>
          <h1>GROWTH</h1>
          <h1>CARE</h1>
          <h1>WELLBEING</h1>
          <p>Premium food</p>
          <p>crafted for the birds<br>that bring joy to every pond.</p>
        </span>
      </div>

      <div class="ids__wrapper full-screen" id="secondBlock">
        <div class="ids__space XL"></div>
        <div class="ids__text-width">
          <h1>Nutrition that speaks their language.</h1>
          <p>From ducklings to seniors, every formula is built to match real duck diets — fish, grains, insects, and greens.</p>
        </div>
        <div class="images">
          <img src="./images/illustrations/gray.png" alt="">
          <img src="./images/illustrations/white.png" alt="">
          <img src="./images/illustrations/ogar.png" alt="">
          <img src="./images/illustrations/green.png" alt="">
        </div>
        <div class="ids__space XL"></div>
      </div>

    <div class="ids__wrapper.XXL full-screen" id="fourthBlock">
        <p>Designed for Ducks. Built for Joy.</p>
        <h1>Duck Inc. was founded with a simple belief: ducks deserve the same care and attention as any pet. Our food is developed with nutritionists, our design with love, and our mission with humor.</h1>
    </div>

    <div class="ids__wrapper.XXL full-screen" id="productBlock">
      <div class="ids__space XL"></div>
      
        <h1>Check out<br>our product section.</h1>
        <div id="carousel">
          <section>
            <img src="images/Mockups/gray.png" alt="">
            <p>Trout &<br>Water Insects</p>

            <section>
              <button>
                <svg width="38" height="38" viewBox="0 0 38 38" xmlns="http://www.w3.org/2000/svg">
                <path d="M0 19C0 17.8954 0.895431 17 2 17H36C37.1046 17 38 17.8954 38 19C38 20.1046 37.1046 21 36 21H2C0.89543 21 0 20.1046 0 19Z"/>
                </svg>
              </button>
              <p>0</p>
              <button>
                <svg width="38" height="38" viewBox="0 0 38 38" xmlns="http://www.w3.org/2000/svg">
                <g clip-path="url(#clip0_14_68)">   
                <path d="M19 0C20.1046 4.82823e-08 21 0.895431 21 2V17H36C37.1046 17 38 17.8954 38 19C38 20.1046 37.1046 21 36 21H21V36C21 37.1046 20.1046 38 19 38C17.8954 38 17 37.1046 17 36V21H2C0.895431 21 0 20.1046 0 19C0 17.8954 0.895431 17 2 17H17V2C17 0.895431 17.8954 -4.82823e-08 19 0Z"/>
                </g>
                </svg>
              </button>
            </section>
          </section>
          <section>
            <img src="images/Mockups/white.png" alt="">
            <p>Peas &<br>Barley</p>
            
            <section>
              <button>
                <svg width="38" height="38" viewBox="0 0 38 38" xmlns="http://www.w3.org/2000/svg">
                <path d="M0 19C0 17.8954 0.895431 17 2 17H36C37.1046 17 38 17.8954 38 19C38 20.1046 37.1046 21 36 21H2C0.89543 21 0 20.1046 0 19Z"/>
                </svg>
              </button>
              <p>0</p>
              <button>
                <svg width="38" height="38" viewBox="0 0 38 38" xmlns="http://www.w3.org/2000/svg">
                <g clip-path="url(#clip0_14_68)">   
                <path d="M19 0C20.1046 4.82823e-08 21 0.895431 21 2V17H36C37.1046 17 38 17.8954 38 19C38 20.1046 37.1046 21 36 21H21V36C21 37.1046 20.1046 38 19 38C17.8954 38 17 37.1046 17 36V21H2C0.895431 21 0 20.1046 0 19C0 17.8954 0.895431 17 2 17H17V2C17 0.895431 17.8954 -4.82823e-08 19 0Z"/>
                </g>
                </svg>
              </button>
            </section>
          </section>
          <section><img src="images/Mockups/green.png" alt="">
            <p>Spinach &<br>River Fish</p>
            
            <section>
              <button>
                <svg width="38" height="38" viewBox="0 0 38 38" xmlns="http://www.w3.org/2000/svg">
                <path d="M0 19C0 17.8954 0.895431 17 2 17H36C37.1046 17 38 17.8954 38 19C38 20.1046 37.1046 21 36 21H2C0.89543 21 0 20.1046 0 19Z"/>
                </svg>
              </button>
              <p>0</p>
              <button>
                <svg width="38" height="38" viewBox="0 0 38 38" xmlns="http://www.w3.org/2000/svg">
                <g clip-path="url(#clip0_14_68)">   
                <path d="M19 0C20.1046 4.82823e-08 21 0.895431 21 2V17H36C37.1046 17 38 17.8954 38 19C38 20.1046 37.1046 21 36 21H21V36C21 37.1046 20.1046 38 19 38C17.8954 38 17 37.1046 17 36V21H2C0.895431 21 0 20.1046 0 19C0 17.8954 0.895431 17 2 17H17V2C17 0.895431 17.8954 -4.82823e-08 19 0Z"/>
                </g>
                </svg>
              </button>
            </section>
          </section>
          <section>
            <img src="images/Mockups/ogar.png" alt="">
            <p>Shrimp &<br>Lake Fish</p>
            <section>
              <button>
                <svg width="38" height="38" viewBox="0 0 38 38" xmlns="http://www.w3.org/2000/svg">
                <path d="M0 19C0 17.8954 0.895431 17 2 17H36C37.1046 17 38 17.8954 38 19C38 20.1046 37.1046 21 36 21H2C0.89543 21 0 20.1046 0 19Z"/>
                </svg>
              </button>
              <p>0</p>
              <button>
                <svg width="38" height="38" viewBox="0 0 38 38" xmlns="http://www.w3.org/2000/svg">
                <g clip-path="url(#clip0_14_68)">   
                <path d="M19 0C20.1046 4.82823e-08 21 0.895431 21 2V17H36C37.1046 17 38 17.8954 38 19C38 20.1046 37.1046 21 36 21H21V36C21 37.1046 20.1046 38 19 38C17.8954 38 17 37.1046 17 36V21H2C0.895431 21 0 20.1046 0 19C0 17.8954 0.895431 17 2 17H17V2C17 0.895431 17.8954 -4.82823e-08 19 0Z"/>
                </g>
                </svg>
              </button>
            </section>
          </section>
          <section>
            <img src="images/Mockups/duckling.png" alt="">
            <p>Corn &<br>Mealworms</p>
            <section>
              <button>
                <svg width="38" height="38" viewBox="0 0 38 38" xmlns="http://www.w3.org/2000/svg">
                <path d="M0 19C0 17.8954 0.895431 17 2 17H36C37.1046 17 38 17.8954 38 19C38 20.1046 37.1046 21 36 21H2C0.89543 21 0 20.1046 0 19Z"/>
                </svg>
              </button>
              <p>0</p>
              <button>
                <svg width="38" height="38" viewBox="0 0 38 38" xmlns="http://www.w3.org/2000/svg">
                <g clip-path="url(#clip0_14_68)">   
                <path d="M19 0C20.1046 4.82823e-08 21 0.895431 21 2V17H36C37.1046 17 38 17.8954 38 19C38 20.1046 37.1046 21 36 21H21V36C21 37.1046 20.1046 38 19 38C17.8954 38 17 37.1046 17 36V21H2C0.895431 21 0 20.1046 0 19C0 17.8954 0.895431 17 2 17H17V2C17 0.895431 17.8954 -4.82823e-08 19 0Z"/>
                </g>
                </svg>
              </button>
            </section>
          </section>
        </div>

        <div id="scroll-buttons">
          <button id="left">
            <svg width="38" height="38" viewBox="0 0 38 38" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M14 2.5L30.5 19L14 35.5" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </button>
          <button id="right">
            <svg width="38" height="38" viewBox="0 0 38 38" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M14 2.5L30.5 19L14 35.5" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </button>
        </div>
        <div class="ids__space XL"></div>
    </div>

    <div class="ids__wrapper.XXL full-screen" id="thirdBlock">
      <div class="ids__space XL"></div>
      <div class="section">
        <div class="ids__text-width">
          <h1>Not just feed. A&nbsp;culture.</h1>
          <p>Our posters celebrate the humor and spirit of ducks everywhere.<br>Collect them, share them, live with them.</p>
        </div>
        <ids-gallery>
          <figure>
            <a href="images\Duck_pics\Duck inc rebranding_1.png">
              <img src="images\Duck_pics\Duck inc rebranding_1.png" alt="Photo by Jan van der Wolf" />
            </a>
          </figure>
          <figure>
            <a href="images\Duck_pics\Duck inc rebranding_2.png">
              <img src="images\Duck_pics\Duck inc rebranding_2.png" alt="Photo by Mehmet Turgut Kirkgoz" />
            </a>
          </figure>
          <figure>
            <a href="images\Duck_pics\Duck inc rebranding_3.png">
              <img src="images\Duck_pics\Duck inc rebranding_3.png" alt="Photo by Jan van der Wolf" />
            </a>
          </figure>
        </ids-gallery>
      </div>
      <div class="ids__space XL"></div>
    </div>


      
      
      <div class="ids__wrapper" id="banner">
          <h1>Good feed makes good moods — for ducks and for you.</h1>
          <p>Shop Duck Inc. Today</p>
      </div>

    </main>

    <footer>
      <h1 id="footerH1">
        Duck Inc
      </h1>

      <div>
        <p>Products</p>
        <p>Posters</p>
        <p>About</p>
      </div>

      <p id="copyright">Copyright © Duck Inc. 2025</p>

      <p>
        Social Icons: (Mock Instagram, X, TikTok)
      </p>
    </footer>


    <script src="./lib/photoswipe.umd.min.js"></script>
    <script src="./lib/photoswipe-lightbox.umd.min.js"></script>
    <script type="module">
      /**
       * @param {HTMLDivElement} node
       */
      const photoSwipeSize = (node) => {
        // get image tag inside of node
        if (node.hasAttribute("data-pswp-width") && node.hasAttribute("data-pswp-height")) {
          return;
        }
        /** @type {HTMLImageElement | null} */
        const img = node.querySelector("img");
        if (!img) {
          return;
        }
        let i = new Image();
        i.onload = () => {
          node.setAttribute("data-pswp-width", i.width.toString());
          node.setAttribute("data-pswp-height", i.height.toString());
        };
        i.src = img.src;
      };

      class IdsGallery extends HTMLElement {
        constructor() {
          super();
          this.classList.add("ids__gallery");
        }

        connectedCallback() {
          this.lightbox = new PhotoSwipeLightbox({
            gallery: this,
            children: "a",
            pswpModule: PhotoSwipe,
            padding: { top: 20, bottom: 40, left: 100, right: 100 },
          });

          this.lightbox.on("uiRegister", () => {
            if (!this.getAttribute("zoom") && this.lightbox?.pswp?.ui?.uiElementsData?.length) {
              this.lightbox.pswp.ui.uiElementsData = this.lightbox.pswp.ui.uiElementsData.filter((el) => el.name !== "zoom");
            }
          });

          this.lightbox.init();

          this.querySelectorAll("a").forEach(photoSwipeSize);
        }

        disconnectedCallback() {
          this.lightbox.destroy();
        }
      }

      window.customElements.define("ids-gallery", IdsGallery);
    </script>

    <script>
      let observer = new IntersectionObserver(
        (elements) => {
          elements.forEach((el) => {
            if (el.intersectionRatio > 0.3) {
              el.target.classList.remove("is-sleeping");
            } else {
              el.target.classList.add("is-sleeping");
            }
          });
        },
        { threshold: [0, 0.5] }
      );

      document.querySelectorAll(".ids__sleepy").forEach((el) => {
        observer.observe(el);
      });
    </script>
    <script>
      class IdsNavbar extends HTMLElement {
        static #items = [];
        static #instances = [];

        constructor() {
          super();
          this.classList.add("ids__navbar");
          this.render();
        }

        static updateItems() {
          // Сейчас оно будет запускаться слишком часто, нужно будет переделать
          this.#items = [...document.querySelectorAll(".ids__nav-item")];
          for (const instance of this.#instances) {
            instance.render();
          }
          this.updateCurrent();
        }

        static updateCurrent() {
          let highestTopPositionIndex = 0;
          for (let i = 0; i < this.#items.length; i++) {
            let { bottom, top } = this.#items[i].getBoundingClientRect() ?? {
              top: 0,
              bottom: 0,
            };
            let topPosition = (top + bottom) / 2;
            if (topPosition < 0) {
              highestTopPositionIndex = i;
            }
            if (topPosition >= 0 && topPosition < window.innerHeight / 2) {
              highestTopPositionIndex = i;
              break;
            }
          }
          let id = this.#items[highestTopPositionIndex].getAttribute("id");
          history.replaceState({}, "", `#${id}`);
          for (const instance of this.#instances) {
            for (const /** @type {HTMLElement} */ li of instance.querySelectorAll("li:has(a)")) {
              li.classList.toggle("current", li.firstElementChild.getAttribute("href") === "#" + id);
            }
          }
        }

        connectedCallback() {
          IdsNavbar.#instances.push(this);
        }

        disconnectedCallback() {
          IdsNavbar.#instances.splice(IdsNavbar.#instances.indexOf(this), 1);
        }

        render() {
          // Тут стоит делать через манипуляции с dom и не пересоздавать одни и те же записи по 100 раз
          this.innerHTML = `
            <ul>
                ${IdsNavbar.#items
                  .map(
                    (item) => `
                    <li>
                        <a href="#${item.getAttribute("id")}">
                            ${item.getAttribute("label")}
                        </a>
                    </li>
                `
                  )
                  .join("")}
            </ul>
          `;
        }
      }

      // TODO можно добавлять/убирать этот лисенер
      document.addEventListener("scroll", () => IdsNavbar.updateCurrent());

      class IdsNavItem extends HTMLElement {
        constructor() {
          super();
          this.classList.add("ids__nav-item");
        }

        connectedCallback() {
          IdsNavbar.updateItems();
        }
        disconnectedCallback() {
          IdsNavbar.updateItems();
        }
      }

      window.customElements.define("ids-navbar", IdsNavbar);
      window.customElements.define("ids-nav-item", IdsNavItem);
    </script>

    <!-- <script src="https://cdn.jsdelivr.net/npm/@studio-freight/lenis@1/bundled/lenis.min.js"></script>
    <script>
      const lenis = new Lenis({
        duration: 1.2, // длительность "инерции"
        smoothWheel: true, // плавность для колёсика мыши
        smoothTouch: true  // плавность для тач-скролла
      })

      function raf(time) {
        lenis.raf(time)
        requestAnimationFrame(raf)
      }

      requestAnimationFrame(raf)
    </script> -->

    <script src="./htmlAnimations.js"></script>
  </body>
</html>
